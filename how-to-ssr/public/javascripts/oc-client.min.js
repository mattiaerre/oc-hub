/*! OpenComponents client v0.37.0 | (c) 2015-2017 OpenTable, Inc. | https://github.com/opentable/oc/tree/master/src/components/oc-client/LICENSES */
!function(e,n){"use strict";function t(){}function r(e,n){if(e){"object"==typeof e&&(e=[].slice.call(e));for(var t=0,r=e.length;t<r;t++)n.call(e,e[t],t)}}function o(e,t){var r=Object.prototype.toString.call(t).slice(8,-1);return t!==n&&null!==t&&r===e}function a(e){return o("Function",e)}function c(e){return o("Array",e)}function i(e){var n=e.split("/"),t=n[n.length-1],r=t.indexOf("?");return r!==-1?t.substring(0,r):t}function u(e){e=e||t,e._done||(e(),e._done=1)}function l(e,n,r,o){var a="object"==typeof e?e:{test:e,success:!!n&&(c(n)?n:[n]),failure:!!r&&(c(r)?r:[r]),callback:o||t},i=!!a.test;return i&&a.success?(a.success.push(a.callback),$.load.apply(null,a.success)):!i&&a.failure?(a.failure.push(a.callback),$.load.apply(null,a.failure)):o(),$}function d(e){var n={};if("object"==typeof e)for(var t in e)e[t]&&(n={name:t,url:e[t]});else n={name:i(e),url:e};var r=w[n.name];return r&&r.url===n.url?r:(w[n.name]=n,n)}function s(e){e=e||w;for(var n in e)if(e.hasOwnProperty(n)&&e[n].state!==_)return!1;return!0}function f(e){e.state=S,r(e.onpreload,function(e){e.call()})}function m(e,t){e.state===n&&(e.state=M,e.onpreload=[],g({url:e.url,type:"cache"},function(){f(e)}))}function p(){var e=arguments,n=e[e.length-1],t=[].slice.call(e,1),o=t[0];return a(n)||(n=null),c(e[0])?(e[0].push(n),$.load.apply(null,e[0]),$):(o?(r(t,function(e){!a(e)&&e&&m(d(e))}),v(d(e[0]),a(o)?o:function(){$.load.apply(null,t)})):v(d(e[0])),$)}function y(){var e=arguments,n=e[e.length-1],t={};return a(n)||(n=null),c(e[0])?(e[0].push(n),$.load.apply(null,e[0]),$):(r(e,function(e,r){e!==n&&(e=d(e),t[e.name]=e)}),r(e,function(e,r){e!==n&&(e=d(e),v(e,function(){s(t)&&u(n)}))}),$)}function v(e,n){return n=n||t,e.state===_?void n():e.state===k?void $.ready(e.name,n):e.state===M?void e.onpreload.push(function(){v(e,n)}):(e.state=k,void g(e,function(){e.state=_,n(),r(C[e.name],function(e){u(e)}),E&&s()&&r(C.ALL,function(e){u(e)})}))}function h(e){e=e||"";var n=e.split("?")[0].split(".");return n[n.length-1].toLowerCase()}function g(n,r){function o(n){n=n||e.event,i.onload=i.onreadystatechange=i.onerror=null,r()}function a(t){t=t||e.event,("load"===t.type||/loaded|complete/.test(i.readyState)&&(!L.documentMode||L.documentMode<9))&&(e.clearTimeout(n.errorTimeout),e.clearTimeout(n.cssTimeout),i.onload=i.onreadystatechange=i.onerror=null,r())}function c(){if(n.state!==_&&n.cssRetries<=20){for(var t=0,r=L.styleSheets.length;t<r;t++)if(L.styleSheets[t].href===i.href)return void a({type:"load"});n.cssRetries++,n.cssTimeout=e.setTimeout(c,250)}}r=r||t;var i,u=h(n.url);"css"===u?(i=L.createElement("link"),i.type="text/"+(n.type||"css"),i.rel="stylesheet",i.href=n.url,n.cssRetries=0,n.cssTimeout=e.setTimeout(c,500)):(i=L.createElement("script"),i.type="text/"+(n.type||"javascript"),i.src=n.url),i.onload=i.onreadystatechange=a,i.onerror=o,i.async=!1,i.defer=!1,n.errorTimeout=e.setTimeout(function(){o({type:"timeout"})},7e3);var l=L.head||L.getElementsByTagName("head")[0];l.insertBefore(i,l.lastChild)}function j(){for(var e=L.getElementsByTagName("script"),n=0,t=e.length;n<t;n++){var r=e[n].getAttribute("data-headjs-load");if(r)return void $.load(r)}}function b(e,n){if(e===L)return E?u(n):q.push(n),$;if(a(e)&&(n=e,e="ALL"),c(e)){var t={};return r(e,function(e){t[e]=w[e],$.ready(e,function(){s(t)&&u(n)})}),$}if("string"!=typeof e||!a(n))return $;var o=w[e];if(o&&o.state===_||"ALL"===e&&s()&&E)return u(n),$;var i=C[e];return i?i.push(n):i=C[e]=[n],$}function T(){return L.body?void(E||(E=!0,j(),r(q,function(e){u(e)}))):(e.clearTimeout($.readyTimeout),void($.readyTimeout=e.setTimeout(T,50)))}function x(){L.addEventListener?(L.removeEventListener("DOMContentLoaded",x,!1),T()):"complete"===L.readyState&&(L.detachEvent("onreadystatechange",x),T())}var E,L=e.document,q=[],C={},w={},A="async"in L.createElement("script")||"MozAppearance"in L.documentElement.style||e.opera,O=e.head_conf&&e.head_conf.head||"head",$=e[O]=e[O]||function(){$.ready.apply(null,arguments)},M=1,S=2,k=3,_=4;if("complete"===L.readyState)T();else if(L.addEventListener)L.addEventListener("DOMContentLoaded",x,!1),e.addEventListener("load",T,!1);else{L.attachEvent("onreadystatechange",x),e.attachEvent("onload",T);var U=!1;try{U=!e.frameElement&&L.documentElement}catch(N){}U&&U.doScroll&&!function B(){if(!E){try{U.doScroll("left")}catch(n){return e.clearTimeout($.readyTimeout),void($.readyTimeout=e.setTimeout(B,50))}T()}}()}$.load=$.js=A?y:p,$.test=l,$.ready=b,$.ready(L,function(){s()&&r(C.ALL,function(e){u(e)}),$.feature&&$.feature("domloaded",!0)})}(window);var oc=oc||{};!function(e,n){"function"==typeof define&&define.amd?define(["exports","jquery"],function(t,r){n(e.oc=t,r,e.head,e.document,e.window)}):"object"==typeof exports&&"string"!=typeof exports.nodeName?n(exports,require("jquery"),e.head,e.document,e.window):n(e.oc=oc,e.$,e.head,e.document,e.window)}(this,function(e,n,t,r,o){function a(e){e=Array.isArray(e)?e:[e],e.forEach(function(e){_[e.type]||(_[e.type]={externals:e.externals})})}if(oc.conf=oc.conf||{},oc.cmd=oc.cmd||[],oc.renderedComponents=oc.renderedComponents||{},oc.status=oc.status||!1,oc.status)return oc;oc.status="loading";var c="https://cdnjs.cloudflare.com/ajax/libs/",i=c+"jquery-ajaxtransport-xdomainrequest/1.0.3/jquery.xdomainrequest.min.js",u=c+"jquery/1.11.2/jquery.min.js",l=oc.conf.retryInterval||5e3,d=oc.conf.retryLimit||30,s=oc.conf.retrySendNumber||!0,f=oc.conf.pollingInterval||500,m=oc.conf.tag||"oc-component",p="baseUrl parameter is required",y="Href parameter missing",v="name parameter is required",h="Failed to load {0} component {1} times. Giving up".replace("{1}",d),g="Error getting compiled view: {0}",j="Error rendering component: {0}, error: {1}",b="Failed to retrieve the component. Retrying in {0} seconds...".replace("{0}",l/1e3),T='Error loading component: view engine "{0}" not supported',x=oc.conf.loadingMessage||"",E="Component '{0}' correctly rendered",L="Unrendered component found. Trying to retrieve it...",q=oc.conf.debug||!1,C=function(){},w=o.navigator.userAgent,A=!!w.match(/MSIE 9/),O=!1,$=!1,M={},S=function(e){return"boolean"==typeof e},k={error:function(e){return console.log(e)},info:function(e){return!!q&&console.log(e)}},_={"oc-template-handlebars":{externals:[{global:"Handlebars",url:"https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.6/handlebars.runtime.min.js"}]},"oc-template-jade":{externals:[{global:"jade",url:"https://cdnjs.cloudflare.com/ajax/libs/jade/1.11.0/runtime.min.js"}]}};oc.conf.templates&&a(oc.conf.templates);var U=function(e,n,t){return void 0===M[e]&&(M[e]=d),M[e]<=0?t():(setTimeout(function(){n(d-M[e]+1)},l),void M[e]--)},N=function(e,n){if(e&&n){var t=oc.$.param(n);return e.indexOf("?")>-1?e+"&"+t:e+"?"+t}return e};oc.registerTemplates=function(e){return a(e),oc.ready(oc.renderUnloadedComponents),_},oc.require=function(e,n,r){"function"==typeof n&&(r=n,n=e,e=void 0),"string"==typeof e&&(e=[e]);var a=function(){var n=o;if("undefined"==typeof e)return!0;for(var t=0;t<e.length;t++)if(n=n[e[t]],!n)return!0;return!1},c=function(){var n=o;if("undefined"!=typeof e){for(var t=0;t<e.length;t++)if(n=n[e[t]],!n)return;return n}};a()?t.load(n,function(){r(c())}):r(c())};var B=function(e,n,t){n.id=Math.floor(9999999999*Math.random()),e.html(n.html),e.attr("id",n.id),e.attr("data-rendered",!0),e.attr("data-rendering",!1),e.attr("data-version",n.version),n.key&&e.attr("data-hash",n.key),n.name&&(e.attr("data-name",n.name),oc.renderedComponents[n.name]=n.version,oc.events.fire("oc:rendered",n)),t()};oc.build=function(e){if(!e.baseUrl)throw p;if(!e.name)throw v;var n=function(e){return e=e||"","/"!==e.slice(-1)&&(e+="/"),e},t=n(e.baseUrl)+n(e.name);if(e.version&&(t+=n(e.version)),e.parameters){t+="?";for(var r in e.parameters)e.parameters.hasOwnProperty(r)&&(t+=r+"="+e.parameters[r]+"&");t=t.slice(0,-1)}return"<"+m+' href="'+t+'"></'+m+">"},oc.events={},oc.ready=function(e){if(O)return e();if($)oc.cmd.push(e);else{$=!0;var n=function(e,n){A&&!e.IE_POLYFILL_LOADED?oc.require(i,n):n()},t=function(){O=!0,$=!1,oc.events=function(){var e=oc.$({});return{fire:function(n,t){return e.trigger(n,t)},on:function(n,t){return e.on(n,t||C)},reset:function(){return e.off()}}}(),e(),oc.events.fire("oc:ready",oc),oc.status="ready";for(var n=0;n<oc.cmd.length;n++)oc.cmd[n](oc);oc.cmd={push:function(e){e(oc)}}},r=!!o.$;oc.require("jQuery",u,function(e){n(e,function(){r?oc.$=e:oc.$=e.noConflict(),t()})})}},oc.render=function(e,n,t){oc.ready(function(){var r=e.type;"jade"===r&&(r="oc-template-jade"),"handlebars"===r&&(r="oc-template-handlebars");var a=_[r];a?oc.require(["oc","components",e.key],e.src,function(c){if(c){var i=a.externals,u=0;i.forEach(function(e,a,i){oc.require(e.global,e.url,function(){if(u++,u===i.length)if("oc-template-handlebars"===r)try{var e=o.Handlebars.template(c,[]);t(null,e(n))}catch(a){t(a.toString())}else t(null,c(n))})})}else t(g.replace("{0}",e.src))}):t(T.replace("{0}",e.type))})},oc.renderNestedComponent=function(e,n){oc.ready(function(){var t=e.attr("data-rendering"),r=e.attr("data-rendered"),o=S(t)?t:"true"===t,a=S(r)?r:"true"===r;o||a?setTimeout(n,f):(k.info(L),e.attr("data-rendering",!0),e.html('<div class="oc-loading">'+x+"</div>"),oc.renderByHref(e.attr("href"),function(t,r){return t||!r?(e.html(""),k.error(t),n()):void B(e,r,n)}))})},oc.renderByHref=function(e,n,t){var r=t,o=n;"function"==typeof n&&(r=n,o=0),oc.ready(function(){if(""===e)return r(j.replace("{1}",y));var n=e;s&&(n=N(n,{__oc_Retry:o})),oc.$.ajax({url:n,headers:{Accept:"application/vnd.oc.unrendered+json"},contentType:"text/plain",crossDomain:!0,async:!0,success:function(e){if("unrendered"===e.renderMode)oc.render(e.template,e.data,function(n,t){return n?r(j.replace("{0}",e.href).replace("{1}",n)):(k.info(E.replace("{0}",e.template.src)),void r(null,{html:t,key:e.template.key,version:e.version,name:e.name}))});else if("rendered"===e.renderMode){if(k.info(E.replace("{0}",e.href)),0===e.html.indexOf("<"+m)){var n=e.html.slice(e.html.indexOf(">")+1),t=n.slice(0,n.lastIndexOf("<"));e.html=t}r(null,{html:e.html,version:e.version,name:e.name})}},error:function(){k.error(b),U(e,function(n){oc.renderByHref(e,n,r)},function(){r(h.replace("{0}",e))})}})})},oc.renderUnloadedComponents=function(){oc.ready(function(){var e=oc.$(m+"[data-rendered!=true]"),n=e.length,t=function(){n--,n||oc.renderUnloadedComponents()};if(n>0)for(var r=0;r<e.length;r++)oc.renderNestedComponent(oc.$(e[r]),t)})},oc.load=function(e,n,t){oc.ready(function(){if("function"!=typeof t&&(t=C),oc.$(e)){oc.$(e).html("<"+m+' href="'+n+'" />');var r=oc.$(m,e);oc.renderNestedComponent(r,function(){t(r)})}})},oc.ready(oc.renderUnloadedComponents),e=oc}),oc.clientVersion="0.37.0";
//# sourceMappingURL=oc-client.min.map